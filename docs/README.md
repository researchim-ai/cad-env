# CAD Environment - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–±–∑–æ—Ä

CAD Environment - —ç—Ç–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π (LLM) –∏ –∞–≥–µ–Ω—Ç–æ–≤ —Å –ø–æ–¥–∫—Ä–µ–ø–ª—è—é—â–∏–º –æ–±—É—á–µ–Ω–∏–µ–º (RL) —Ä–∞–±–æ—Ç–µ —Å CAD —Å–∏—Å—Ç–µ–º–∞–º–∏. –ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ CAD –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîß **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FreeCAD** - –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ FreeCAD API
- ü§ñ **LLM –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
- üåê **REST API** - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- üìä **–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- üîÑ **–†–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏** - –†–∞–±–æ—Ç–∞ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ FreeCAD

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd cad-env

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pip install -e .
```

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from cad_env import CADEnvironment, LLMInterface

# –°–æ–∑–¥–∞–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
env = CADEnvironment()

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
doc_id = env.create_document("MyDocument")

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
result = env.execute_command("create_box", length=10, width=5, height=3)

# LLM –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
llm = LLMInterface(env)
result = llm.process_natural_language("–°–æ–∑–¥–∞–π –∫–æ—Ä–æ–±–∫—É —Ä–∞–∑–º–µ—Ä–æ–º 10x5x3")
```

### –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

```bash
python examples/web_server_example.py --host 0.0.0.0 --port 8000
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000/web`

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **CADEnvironment** - –û—Å–Ω–æ–≤–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
2. **FreeCADWrapper** - –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è FreeCAD API
3. **LLMInterface** - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è LLM –∞–≥–µ–Ω—Ç–æ–≤
4. **CADAPI** - REST API
5. **WebServer** - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
cad-env/
‚îú‚îÄ‚îÄ cad_env/                 # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ core/               # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ api/                # API –∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ llm_interface/      # LLM –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ examples/               # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ tests/                  # –¢–µ—Å—Ç—ã
```

## API Reference

### CADEnvironment

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CAD –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º.

#### –ú–µ—Ç–æ–¥—ã

- `create_document(name: str) -> str` - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
- `save_document(filepath: str) -> bool` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
- `load_document(filepath: str) -> str` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
- `execute_command(command: str, **kwargs) -> Dict` - –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
- `get_document_info() -> Dict` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ–∫—É–º–µ–Ω—Ç–µ
- `get_history() -> List[Dict]` - –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π
- `reset()` - –°–±—Ä–æ—Å–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### LLMInterface

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM –∞–≥–µ–Ω—Ç–∞–º–∏.

#### –ú–µ—Ç–æ–¥—ã

- `process_natural_language(text: str) -> Dict` - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫
- `get_available_commands() -> List[Dict]` - –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `get_context_info() -> Dict` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- `execute_structured_command(command: Dict) -> Dict` - –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤

- **–ö–æ—Ä–æ–±–∫–∞**: "–°–æ–∑–¥–∞–π –∫–æ—Ä–æ–±–∫—É —Ä–∞–∑–º–µ—Ä–æ–º 10x5x3"
- **–¶–∏–ª–∏–Ω–¥—Ä**: "–°–æ–∑–¥–∞–π —Ü–∏–ª–∏–Ω–¥—Ä —Ä–∞–¥–∏—É—Å–æ–º 5 –∏ –≤—ã—Å–æ—Ç–æ–π 10"
- **–°—Ñ–µ—Ä–∞**: "–°–æ–∑–¥–∞–π —Å—Ñ–µ—Ä—É —Ä–∞–¥–∏—É—Å–æ–º 3"

### –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏

- **–ü–æ–≤–æ—Ä–æ—Ç**: "–ü–æ–≤–µ—Ä–Ω–∏ –Ω–∞ 90 –≥—Ä–∞–¥—É—Å–æ–≤ –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Z"
- **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ**: "–ü–µ—Ä–µ–º–µ—Å—Ç–∏ –Ω–∞ 10 –µ–¥–∏–Ω–∏—Ü –ø–æ –æ—Å–∏ X"
- **–í—ã–¥–∞–≤–ª–∏–≤–∞–Ω–∏–µ**: "–í—ã–¥–∞–≤–∏ –Ω–∞ 5 –µ–¥–∏–Ω–∏—Ü"

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```python
from cad_env import CADEnvironment

env = CADEnvironment()

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
doc_id = env.create_document("TestDocument")

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ–±–∫–∏
result = env.execute_command("create_box", length=10, width=5, height=3)

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
env.save_document("output.fcstd")
```

### LLM –∞–≥–µ–Ω—Ç

```python
from cad_env import LLMInterface

llm = LLMInterface()

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
result = llm.process_natural_language("–°–æ–∑–¥–∞–π –∫–æ—Ä–æ–±–∫—É —Ä–∞–∑–º–µ—Ä–æ–º 10x5x3")
print(result)
```

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```python
from cad_env.api import WebServer

server = WebServer(host="0.0.0.0", port=8000)
server.run()
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `FREECAD_PATH` - –ü—É—Ç—å –∫ FreeCAD (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `CAD_ENV_DEBUG` - –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
- `CAD_ENV_LOG_LEVEL` - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª

```python
config = {
    "freecad_path": "/path/to/freecad",
    "debug": True,
    "log_level": "INFO"
}

env = CADEnvironment(config)
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
git clone <repository-url>
cd cad-env
pip install -e ".[dev]"
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
pytest tests/
```

### –õ–∏–Ω—Ç–∏–Ω–≥

```bash
black cad_env/
flake8 cad_env/
mypy cad_env/
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

Apache 2.0

## –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- GitHub Issues: [—Å—Å—ã–ª–∫–∞ –Ω–∞ issues]
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [—Å—Å—ã–ª–∫–∞ –Ω–∞ docs]
- –ü—Ä–∏–º–µ—Ä—ã: [—Å—Å—ã–ª–∫–∞ –Ω–∞ examples]

